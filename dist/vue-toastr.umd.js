!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("vue")):"function"==typeof define&&define.amd?define(["exports","vue"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).VueToastr={},t.Vue)}(this,(function(t,e){"use strict";const s=["toast-top-right","toast-bottom-right","toast-bottom-left","toast-top-left","toast-top-full-width","toast-bottom-full-width","toast-top-center","toast-bottom-center"],i=e.defineComponent({name:"ToastProgress",props:{percent:{type:Number,default:100}},computed:{styleObject(){return{width:`${this.percent.toString()}%`}}}});i.render=function(t,s,i,a,o,r){return e.openBlock(),e.createElementBlock("div",{class:"toast-progress",style:e.normalizeStyle(t.styleObject)},null,4)};class a{constructor(t){this.params=t,this.id=0,this.remaning=0,this.estimated=0,this.times={},this.stepTime=void 0===t.stepTime?50:t.stepTime}callback(){this.times.callback=a.getTime(),this.remaning-=this.stepTime,this.estimated+=this.stepTime,this.callCallbackFN("callback"),this.remaning<=0&&this.finish()}static getTime(){return(new Date).getTime()}getPercent(){return Math.floor(this.remaning/this.params.totalTime*100)}start(){this.times.started=a.getTime(),this.callCallbackFN("before:start"),this.remaning=this.params.totalTime,this.setupInterval(),this.callCallbackFN("after:start")}finish(){this.times.finished=a.getTime(),this.callCallbackFN("before:finish"),this.clearInterval(),this.callCallbackFN("after:finish")}stop(){this.times.stoped=a.getTime(),this.callCallbackFN("before:stop"),this.clearInterval(),this.callCallbackFN("after:stop")}pause(){this.times.paused=a.getTime(),this.callCallbackFN("before:pause"),this.clearInterval(),this.callCallbackFN("after:pause")}resume(){this.times.resumed=a.getTime(),this.callCallbackFN("before:resume"),this.setupInterval(),this.callCallbackFN("after:resume")}callCallbackFN(t){var e;(null==(e=this.params)?void 0:e.callbackFunctions)&&"function"==typeof this.params.callbackFunctions[t]&&this.params.callbackFunctions[t]()}clearInterval(){clearInterval(this.id)}setupInterval(){this.id=setInterval((()=>{this.callback()}),this.stepTime)}}var o=e.defineComponent({name:"Toast",components:{ToastProgress:i},props:["data"],data:()=>({timeout:0,progressbar:!1,progressBarTimer:void 0,timeoutTimer:void 0}),mounted(){this.progressBarTimer&&this.progressBarTimer.start(),this.timeoutTimer&&this.timeoutTimer.start()},created(){void 0!==this.data.timeout&&0!==this.data.timeout?(this.timeoutTimer=new a({totalTime:this.data.timeout,stepTime:50,callbackFunctions:{"after:finish":()=>{this.close()}}}),!1!==this.data.progressbar&&(this.progressbar=!0,this.progressBarTimer=new a({totalTime:this.data.timeout}))):null!==this.data.progressBarValue&&!1!==this.data.progressbar&&(this.progressbar=!0)},computed:{classNames(){return["toast",`toast-${this.data.type}`].concat(this.data.classNames)},progressBarPercent(){return null!=this.data.progressBarValue?this.data.progressBarValue:void 0!==this.progressBarTimer?this.progressBarTimer.getPercent():0}},beforeUnmount(){null!=this.progressBarTimer&&this.progressBarTimer.stop(),null!=this.timeoutTimer&&this.timeoutTimer.stop()},methods:{onMouseOver(){void 0!==this.data.onMouseOver&&this.data.onMouseOver(),this.data.closeOnHover&&(null!=this.progressBarTimer&&this.progressBarTimer.pause(),null!=this.timeoutTimer&&this.timeoutTimer.pause())},onMouseOut(){void 0!==this.data.onMouseOut&&this.data.onMouseOut(),this.data.closeOnHover&&(null!=this.progressBarTimer&&this.progressBarTimer.resume(),null!=this.timeoutTimer&&this.timeoutTimer.resume())},clicked(){void 0!==this.data.onClicked&&this.data.onClicked(),this.clickClose()},clickClose(){void 0!==this.data.clickClose&&!1===this.data.clickClose||this.close()},close(){this.$parent.Close(this.data)}}});const r=["innerHTML"],l=["innerHTML"];o.render=function(t,s,i,a,o,n){const c=e.resolveComponent("toast-progress");return e.openBlock(),e.createElementBlock("div",{style:e.normalizeStyle([t.data.style,{display:"block"}]),class:e.normalizeClass(t.classNames),onClick:s[0]||(s[0]=e=>t.clicked()),onMouseover:s[1]||(s[1]=(...e)=>t.onMouseOver&&t.onMouseOver(...e)),onMouseout:s[2]||(s[2]=(...e)=>t.onMouseOut&&t.onMouseOut(...e))},[t.progressbar?(e.openBlock(),e.createBlock(c,{key:0,percent:t.progressBarPercent,ref:"progressBar"},null,8,["percent"])):e.createCommentVNode("",!0),t.data.title?(e.openBlock(),e.createElementBlock("div",{key:1,class:"toast-title",innerHTML:t.data.title},null,8,r)):e.createCommentVNode("",!0),t.data.msg?(e.openBlock(),e.createElementBlock("div",{key:2,class:"toast-message",innerHTML:t.data.msg},null,8,l)):e.createCommentVNode("",!0)],38)};const n=e.reactive({}),c=e.reactive({});var d=e.defineComponent({name:"ToastContainer",props:{defaultClassNames:{type:Array,default:()=>[]},defaultPosition:{type:String,default:()=>"toast-top-right"},defaultType:{type:String,default:()=>"success"},defaultCloseOnHover:{type:Boolean,default:()=>!0},defaultTimeout:{type:Number,default:()=>5e3},defaultProgressBar:{type:Boolean,default:()=>!0},defaultProgressBarValue:{type:Number,default:()=>{}},defaultPreventDuplicates:{type:Boolean,default:()=>!1},defaultStyle:{type:Object,default:()=>({})}},components:{Toast:o},data(){for(let t=0;t<=s.length-1;t+=1)n[s[t]]={};return{positions:s,list:n,index:0,savedNames:c}},created(){},mounted(){},methods:{addToast(t){const e=t;this.index+=1,e.index=this.index,this.list[e.position][this.index]=e,void 0!==e.name&&(this.savedNames[e.name]=e),this.$nextTick((()=>{void 0!==e.onCreated&&e.onCreated()}))},removeByName(t){void 0!==this.savedNames[t]&&(this.Close(this.savedNames[t]),delete this.savedNames[t])},removeToast(t){void 0!==this.list[t.position][t.index]&&(delete this.list[t.position][t.index],this.$nextTick((()=>{void 0!==t.onClosed&&t.onClosed()})))},setProgress(t,e){const s=this.list[t.position][t.index];void 0!==s&&(s.progressBarValue=e)},Add(t){return this.AddData(this.processObjectData(t))},AddData(t){if("object"!=typeof t)return!1;if(t.preventDuplicates){const e=Object.keys(this.list[t.position]);for(let s=0;s<e.length;s+=1)if(this.list[t.position][e[s]].title===t.title&&this.list[t.position][e[s]].msg===t.msg)return!1}return this.addToast(t),t},processObjectData(t){const e=t;return"object"==typeof e&&void 0!==e.msg?(void 0===e.classNames&&(e.classNames=this.defaultClassNames),void 0===e.position&&(e.position=this.defaultPosition),void 0===e.type&&(e.type=this.defaultType),void 0===e.timeout&&(e.timeout=this.defaultTimeout),void 0===e.progressbar&&(e.progressbar=this.defaultProgressBar),void 0===e.progressBarValue&&(e.progressBarValue=this.defaultProgressBarValue),void 0===e.closeOnHover&&(e.closeOnHover=this.defaultCloseOnHover),void 0===e.preventDuplicates&&(e.preventDuplicates=this.defaultPreventDuplicates),void 0===e.style&&(e.style=this.defaultStyle),e):{index:0,msg:e.toString(),position:this.defaultPosition,type:this.defaultType,timeout:this.defaultTimeout,closeOnHover:this.defaultCloseOnHover,progressbar:this.defaultProgressBar,progressBarValue:this.defaultProgressBarValue,preventDuplicates:this.defaultPreventDuplicates,style:this.defaultStyle,classNames:this.defaultClassNames}},e(t,e){const s=this.processObjectData(t);return s.type="error",e&&(s.title=e),this.AddData(s)},s(t,e){const s=this.processObjectData(t);return s.type="success",e&&(s.title=e),this.AddData(s)},w(t,e){const s=this.processObjectData(t);return s.type="warning",e&&(s.title=e),this.AddData(s)},i(t,e){const s=this.processObjectData(t);return s.type="info",e&&(s.title=e),this.AddData(s)},Close(t){this.removeToast(t)},removeByType(t){for(let e=0;e<this.positions.length;e+=1){const s=Object.keys(this.list[this.positions[e]]);for(let i=0;i<s.length;i+=1)this.list[this.positions[e]][s[i]].type===t&&this.Close(this.list[this.positions[e]][s[i]])}},clearAll(){for(let t=0;t<this.positions.length;t+=1){const e=Object.keys(this.list[this.positions[t]]);for(let s=0;s<e.length;s+=1)this.Close(this.list[this.positions[t]][e[s]])}}}});d.render=function(t,s,i,a,o,r){const l=e.resolveComponent("Toast");return e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.list,((t,s)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass("toast-container "+s),key:s},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t,(t=>(e.openBlock(),e.createBlock(l,{data:t,key:t.index},null,8,["data"])))),128))],2)))),128)};const u={install:(t,s)=>{const i=e.createApp(d,s),a=document.createElement("div"),o=i.mount(a);document.body&&document.body.appendChild(a),t.config.globalProperties.$toastr=o,t.provide("VueToastr",o)}};t.Toast=o,t.ToastContainer=d,t.ToastProgress=i,t.VueToastr=u,Object.defineProperty(t,"__esModule",{value:!0}),t[Symbol.toStringTag]="Module"}));
//# sourceMappingURL=vue-toastr.umd.js.map
