"use strict";var b=Object.defineProperty;var k=(e,t,s)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var n=(e,t,s)=>(k(e,typeof t!="symbol"?t+"":t,s),s);Object.defineProperty(exports,"__esModule",{value:!0});exports[Symbol.toStringTag]="Module";var i=require("vue");const u=["toast-top-right","toast-bottom-right","toast-bottom-left","toast-top-left","toast-top-full-width","toast-bottom-full-width","toast-top-center","toast-bottom-center"];var c=(e,t)=>{const s=e.__vccOpts||e;for(const[o,r]of t)s[o]=r;return s};const v=i.defineComponent({name:"ToastProgress",props:{percent:{type:Number,default:100}},computed:{styleObject(){return{width:`${this.percent.toString()}%`}}}}),B=v;function C(e,t,s,o,r,p){return i.openBlock(),i.createElementBlock("div",{class:"toast-progress",style:i.normalizeStyle(e.styleObject)},null,4)}var g=c(B,[["render",C]]);class a{constructor(t){n(this,"id");n(this,"params");n(this,"remaning");n(this,"estimated");n(this,"times");n(this,"stepTime");this.params=t,this.id=0,this.remaning=0,this.estimated=0,this.times={},this.stepTime=typeof t.stepTime=="undefined"?50:t.stepTime}callback(){this.times.callback=a.getTime(),this.remaning-=this.stepTime,this.estimated+=this.stepTime,this.callCallbackFN("callback"),this.remaning<=0&&this.finish()}static getTime(){return new Date().getTime()}getPercent(){return Math.floor(this.remaning/this.params.totalTime*100)}start(){this.times.started=a.getTime(),this.callCallbackFN("before:start"),this.remaning=this.params.totalTime,this.setupInterval(),this.callCallbackFN("after:start")}finish(){this.times.finished=a.getTime(),this.callCallbackFN("before:finish"),this.clearInterval(),this.callCallbackFN("after:finish")}stop(){this.times.stoped=a.getTime(),this.callCallbackFN("before:stop"),this.clearInterval(),this.callCallbackFN("after:stop")}pause(){this.times.paused=a.getTime(),this.callCallbackFN("before:pause"),this.clearInterval(),this.callCallbackFN("after:pause")}resume(){this.times.resumed=a.getTime(),this.callCallbackFN("before:resume"),this.setupInterval(),this.callCallbackFN("after:resume")}callCallbackFN(t){var s;((s=this.params)==null?void 0:s.callbackFunctions)&&typeof this.params.callbackFunctions[t]=="function"&&this.params.callbackFunctions[t]()}clearInterval(){clearInterval(this.id)}setupInterval(){this.id=setInterval(()=>{this.callback()},this.stepTime)}}const N=i.defineComponent({name:"Toast",components:{ToastProgress:g},props:{data:{type:Object,default:()=>({})}},data(){return{timeout:0,progressbar:!1,progressBarTimer:void 0,timeoutTimer:void 0}},mounted(){this.progressBarTimer&&this.progressBarTimer.start(),this.timeoutTimer&&this.timeoutTimer.start()},created(){typeof this.data.timeout!="undefined"&&this.data.timeout!==0?(this.timeoutTimer=new a({totalTime:this.data.timeout,stepTime:50,callbackFunctions:{"after:finish":()=>{this.close()}}}),this.data.progressbar!==!1&&(this.progressbar=!0,this.progressBarTimer=new a({totalTime:this.data.timeout}))):this.data.progressBarValue!==null&&this.data.progressbar!==!1&&(this.progressbar=!0)},computed:{classNames(){var e;return((e=this.data)==null?void 0:e.classNames)?["toast",`toast-${this.data.type}`].concat(this.data.classNames):["toast",`toast-${this.data.type}`]},progressBarPercent(){return this.data.progressBarValue!=null?this.data.progressBarValue:this.progressBarTimer!==void 0?this.progressBarTimer.getPercent():0}},beforeUnmount(){this.progressBarTimer!=null&&this.progressBarTimer.stop(),this.timeoutTimer!=null&&this.timeoutTimer.stop()},methods:{onMouseOver(){typeof this.data.onMouseOver!="undefined"&&this.data.onMouseOver(),this.data.closeOnHover&&(this.progressBarTimer!=null&&this.progressBarTimer.pause(),this.timeoutTimer!=null&&this.timeoutTimer.pause())},onMouseOut(){typeof this.data.onMouseOut!="undefined"&&this.data.onMouseOut(),this.data.closeOnHover&&(this.progressBarTimer!=null&&this.progressBarTimer.resume(),this.timeoutTimer!=null&&this.timeoutTimer.resume())},clicked(){typeof this.data.onClicked!="undefined"&&this.data.onClicked(),this.clickClose()},clickClose(){typeof this.data.clickClose!="undefined"&&this.data.clickClose===!1||this.close()},close(){this.$parent.Close(this.data)}}}),O=["innerHTML"],$=["innerHTML"],P={key:3,class:"toast-message"};function D(e,t,s,o,r,p){const d=i.resolveComponent("toast-progress");return i.openBlock(),i.createElementBlock("div",{style:i.normalizeStyle([e.data.style,{display:"block"}]),class:i.normalizeClass(e.classNames),onClick:t[0]||(t[0]=l=>e.clicked()),onMouseover:t[1]||(t[1]=(...l)=>e.onMouseOver&&e.onMouseOver(...l)),onMouseout:t[2]||(t[2]=(...l)=>e.onMouseOut&&e.onMouseOut(...l))},[e.progressbar?(i.openBlock(),i.createBlock(d,{key:0,percent:e.progressBarPercent,ref:"progressBar"},null,8,["percent"])):i.createCommentVNode("",!0),e.data.title?(i.openBlock(),i.createElementBlock("div",{key:1,class:"toast-title",innerHTML:e.data.title},null,8,O)):i.createCommentVNode("",!0),e.data.msg&&!e.$slots.default?(i.openBlock(),i.createElementBlock("div",{key:2,class:"toast-message",innerHTML:e.data.msg},null,8,$)):i.createCommentVNode("",!0),e.$slots.default?(i.openBlock(),i.createElementBlock("div",P,[i.renderSlot(e.$slots,"default")])):i.createCommentVNode("",!0)],38)}var y=c(N,[["render",D]]);const m=i.reactive({}),j=i.reactive({}),F=i.defineComponent({name:"ToastContainer",props:{defaultClassNames:{type:Array,default:()=>[]},defaultPosition:{type:String,default:()=>"toast-top-right"},defaultType:{type:String,default:()=>"success"},defaultCloseOnHover:{type:Boolean,default:()=>!0},defaultTimeout:{type:Number,default:()=>5e3},defaultProgressBar:{type:Boolean,default:()=>!0},defaultProgressBarValue:{type:Number,default:()=>{}},defaultPreventDuplicates:{type:Boolean,default:()=>!1},defaultStyle:{type:Object,default:()=>({})}},components:{Toast:y},data(){for(let e=0;e<=u.length-1;e+=1)m[u[e]]={};return{positions:u,list:m,index:0,savedNames:j}},created(){},mounted(){},methods:{addToast(e){const t=e;this.index+=1,t.index=this.index,this.list[t.position][this.index]=t,typeof t.name!="undefined"&&(this.savedNames[t.name]=t),this.$nextTick(()=>{typeof t.onCreated!="undefined"&&t.onCreated()})},removeByName(e){typeof this.savedNames[e]!="undefined"&&(this.Close(this.savedNames[e]),delete this.savedNames[e])},removeToast(e){typeof this.list[e.position][e.index]!="undefined"&&(delete this.list[e.position][e.index],this.$nextTick(()=>{typeof e.onClosed!="undefined"&&e.onClosed()}))},setProgress(e,t){const s=this.list[e.position][e.index];typeof s!="undefined"&&(s.progressBarValue=t)},Add(e){return this.AddData(this.processObjectData(e))},AddData(e){if(typeof e!="object")return!1;if(e.preventDuplicates){const t=Object.keys(this.list[e.position]);for(let s=0;s<t.length;s+=1)if(this.list[e.position][t[s]].title===e.title&&this.list[e.position][t[s]].msg===e.msg)return!1}return this.addToast(e),e},processObjectData(e){const t=e;return typeof t=="object"&&typeof t.msg!="undefined"?(typeof t.classNames=="undefined"&&(t.classNames=this.defaultClassNames),typeof t.position=="undefined"&&(t.position=this.defaultPosition),typeof t.type=="undefined"&&(t.type=this.defaultType),typeof t.timeout=="undefined"&&(t.timeout=this.defaultTimeout),typeof t.progressbar=="undefined"&&(t.progressbar=this.defaultProgressBar),typeof t.progressBarValue=="undefined"&&(t.progressBarValue=this.defaultProgressBarValue),typeof t.closeOnHover=="undefined"&&(t.closeOnHover=this.defaultCloseOnHover),typeof t.preventDuplicates=="undefined"&&(t.preventDuplicates=this.defaultPreventDuplicates),typeof t.style=="undefined"&&(t.style=this.defaultStyle),t):{index:0,msg:t.toString(),position:this.defaultPosition,type:this.defaultType,timeout:this.defaultTimeout,closeOnHover:this.defaultCloseOnHover,progressbar:this.defaultProgressBar,progressBarValue:this.defaultProgressBarValue,preventDuplicates:this.defaultPreventDuplicates,style:this.defaultStyle,classNames:this.defaultClassNames}},e(e,t){const s=this.processObjectData(e);return s.type="error",t&&(s.title=t),this.AddData(s)},s(e,t){const s=this.processObjectData(e);return s.type="success",t&&(s.title=t),this.AddData(s)},w(e,t){const s=this.processObjectData(e);return s.type="warning",t&&(s.title=t),this.AddData(s)},i(e,t){const s=this.processObjectData(e);return s.type="info",t&&(s.title=t),this.AddData(s)},Close(e){this.removeToast(e)},removeByType(e){for(let t=0;t<this.positions.length;t+=1){const s=Object.keys(this.list[this.positions[t]]);for(let o=0;o<s.length;o+=1)this.list[this.positions[t]][s[o]].type===e&&this.Close(this.list[this.positions[t]][s[o]])}},clearAll(){for(let e=0;e<this.positions.length;e+=1){const t=Object.keys(this.list[this.positions[e]]);for(let s=0;s<t.length;s+=1)this.Close(this.list[this.positions[e]][t[s]])}}}});function V(e,t,s,o,r,p){const d=i.resolveComponent("Toast");return i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(e.list,(l,f)=>(i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass("toast-container "+f),key:f},[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(l,h=>(i.openBlock(),i.createBlock(d,{data:h,key:h.index},{default:i.withCtx(()=>[i.renderSlot(e.$slots,"default")]),_:2},1032,["data"]))),128))],2))),128)}var T=c(F,[["render",V]]);const M={install:(e,t)=>{const s=i.createApp(T,t),o=document.createElement("div"),r=s.mount(o);document.body&&document.body.appendChild(o),e.config.globalProperties.$toastr=r,e.provide("toastr",r)}};exports.Toast=y;exports.ToastContainer=T;exports.ToastProgress=g;exports.VueToastr=M;
//# sourceMappingURL=vue-toastr.cjs.js.map
